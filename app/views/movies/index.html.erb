<div ng-app = "app">
  <div ng-controller = "moviesCtrl" ng-init = "setup()">
    <ul>
      Movie Filter: <input ng-model = "movieFilter">
      <table class = "table">
        <tr>
          <th ng-click = "sortByAttribute('name')" >
            Name
            <span ng-if = "descending === false">
              <span ng-if = "sortAttribute == 'name'">
                &uarr;
              </span>
            </span>
            <span ng-if = "descending === true">
              <span ng-if = "sortAttribute == 'name'">
                &darr;
              </span>
            </span>
          </th>
          <th ng-click = "sortByAttribute('length')" >
            Movie Run Time
            <span ng-if = "descending === false">
              <span ng-if = "sortAttribute == 'length'">
                &uarr;
              </span>
            </span>
            <span ng-if = "descending === true">
              <span ng-if = "sortAttribute == 'length'">
                &darr;
              </span>
            </span>
          </th>
          <th ng-click = "sortByAttribute('year')" >
            Year of Release
            <span ng-if = "descending === false">
              <span ng-if = "sortAttribute == 'year'">
                &uarr;
              </span>
            </span>
            <span ng-if = "descending === true">
              <span ng-if = "sortAttribute == 'year'">
                &darr;
              </span>
            </span>
          </th>
          <th ng-click = "sortByAttribute('description')" >
            Summary
            <span ng-if = "descending === false">
              <span ng-if = "sortAttribute == 'description'">
                &uarr;
              </span>
            </span>
            <span ng-if = "descending === true">
              <span ng-if = "sortAttribute == 'description'">
                &darr;
              </span>
            </span>
          </th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
        <tr ng-repeat = "movie in movies | filter: movieFilter | orderBy: sortAttribute:descending">
          <td>{{movie.name}}</td>
          <td>{{movie.length}}</td>
          <td>{{movie.year}}</td>
          <td>{{movie.description}}</td>
          <td><button ng-click = "pickEditMovie(movie)">Edit This Movie</button></td>
          <td><button ng-click = "deleteMovie(movie)">Delete Movie</button></td>
        </tr>
      </table>
    </ul>
    <div ng-if = "editingMovie">
      <h3>Edit Movie</h3>
      <p>Name: <input ng-model = "editingMovie.name"></p>
      <p>Length: <input ng-model = "editingMovie.length"></p>
      <p>Description: <input ng-model = "editingMovie.description"></p>
      <p>Year: <input ng-model = "editingMovie.year"></p>
      <p> <button ng-click = "updateMovie(editingMovie)">Update Movie</button> </p>
    </div>
    <div>
      <h2>Add New Movie(ONLY STAR WARS)</h2>
      <div ng-if = "errors" style = "color: red">
        <ul>
          <li ng-repeat = "error in errors">{{error}}</li>
        </ul>
      </div>
      <p>Name: <input ng-model = "newName"></input></p>
      <p>Length: <input ng-model = "newLength"></p>
      <p>Description: <input ng-model = "newDescription"></p>
      <p>Year: <input ng-model = "newYear"></p>
      <p><button ng-click = "addMovie(newName, newLength, newDescription, newYear)">Add New (Star Wars) Movie</button></p>
    </div>
  </div>
</div>